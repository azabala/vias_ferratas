<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0;user-scalable=no;target-densityDpi=device-dpi" />
<meta http-equiv="Content-Security-Policy" 
 	content="default-src * 'unsafe-inline' gap:; style-src 'self' 'unsafe-inline'; media-src *" />


<link rel="stylesheet" type="text/css" href="./css/jquery.mobile-1.4.5.min.css" />
<link rel="stylesheet" type="text/css" href="./css/buscamapas.css" />



<title>Vías Ferratas</title>

<script src="cordova.js"></script>
<script src="./js/jquery-2.1.4.min.js"></script>
<script src="./js/jquery.mobile-1.4.5.min.js"></script>
<script src="./js/initialize.js"></script>
<script src="./js/i18next-1.7.4.js"></script>
<script src="./js/buscamapas.js"></script>

<script>

//ios no gestiona los enlaces geo:
var isIOS = false;

var localesPath = 'js/locales/__lng__/__ns__.json';

//admob interstitial counter
var num_map_views = 0;

var BACK_END_SERVER = 'http://www.buscamapas.com';
var GEO_TABLE = 'rutas_mtb';


var app = {
	    initialize: function() {
	        this.bindEvents();
	    },
	   

	    bindEvents: function() {
	    	document.addEventListener("deviceready", this.fired_device_ready, false);
	    },
	   
	    
	    fired_device_ready: function() {
	    	try{
	    		initTextsAndBgImages();
	    		onDeviceReady();
	    		initAd();
				navigator.splashscreen.hide();
				
				if(window.ga){
					window.ga.startTrackerWithId('UA-56863485-1', 30);
				}
				
	    	  }catch(err){
	    		  alert(err.message);
	    	  }
	    		
	    	
	    },
	    
};

function init(){
	window.onerror = function(message, url, lineNumber) {
	        alert("Error: "+message+" in "+url+" at line "+lineNumber);
	}
	app.initialize();
}
</script>

</head>

<body onload="init()">
	<!--  
	********************************
	Primera pantalla: menu principal
	******************************** 
	-->
	
	 <div data-role="page" id="main-menu">
			<div data-role="header" data-position="fixed">
				<a data-theme="c" >
				<img border="0" src="./img/lupa-map-24x24.png" alt="buscamapas.com"
					style="float: left; display: inline" />
				</a>
					
					
				<h2 id="app_title" data-i18n>app.app_title</h2>
	
				<a href="#menu_panel" 
					data-icon="bars" 
					data-iconpos="notext"
					id="menu-button" 
					data-theme="c"
				></a>
			</div>
	
			<div role="main" class="ui-content" id="menu-content">
				<h3 id="app_welcome" data-i18n>app.welcome</h3>
				<form>
				<!-- 
					<a class="ui-btn ui-icon-search ui-corner-all ui-shadow"
						href="#search-maps" data-role="button"
						data-icon="search"
						id="buscar-mapas" data-i18n>app.buscar-mapas</a> 
				-->
					<a 
						href="#search-maps" data-role="button"
						data-icon="search"
						id="buscar-mapas" data-i18n>app.buscar-mapas</a>
					<a
						class="ui-btn  ui-icon-location ui-corner-all ui-shadow"
						data-role="button" 
						data-icon="location"
						id="around-you" 
						href="#maps-around-results" data-i18n>app.around-you</a> 
					<a
						class="ui-btn  ui-icon-star ui-corner-all ui-shadow"
						href="#fav-results" 
						data-role="button" 
						data-icon="star"
						id="see-favs" data-i18n>app.favs</a>
				</form>
			</div>
		</div>
		
		
		
		
	<!--  
	********************************
	Pantalla de busqueda por texto
	******************************** 
	-->
	<div data-role="page" id="search-maps">
		<div data-role="header" data-position="fixed">
			<a data-icon="arrow-l" data-iconpos="notext" id="back-button"
				data-theme="c"  data-rel="back" class="large_button"></a>
			<h2 id="buscar-mapas-title" data-i18n>app.buscar-mapas</h2>
			<a href="#menu_panel" 
				data-icon="bars" 
				data-iconpos="notext"
				id="menu-button" 
				data-theme="c"
			></a>
		</div>
		<div role="main" class="ui-content" id="search-maps-content">
			<form id="geographic_form">
				<label for="search-criteria" id="buscar-por-ciudad-title" data-i18n>app.buscar-mapas-descriptive</label>
				<input type="search" name="search-criteria" id="search-criteria"
					autocomplete="off" data-inset="true" data-role="autocomplete"
					placeholder="Madrid (España)" data-clear-btn="true"></input>

				<ul id="autocomplete-results" name="autocomplete-results"
					data-role='listview' data-inset='true'>
				</ul>
				<a href="#search-maps-results" id="search-button"
					name="search-button" data-role="button" data-theme="b" data-i18n>app.search</a>
			</form>
		</div>
	</div>
	
	
	<!-- 
	**********************************************
	pantalla de resultados de busqueda 
	**********************************************
	-->
	<div data-role="page" id="search-maps-results">
		<div data-role="header" data-position="fixed">
			<a href="#search-maps" data-icon="arrow-l" data-iconpos="notext"
				id="back-button-smr" class="large_button"></a>
			<h2 id="buscar-mapas-result-title" style="white-space: normal;"
				data-i18n>app.buscar-mapas-result</h2>
			
			<a href="#filters" 
				id="filter_button"
				data-role="button" 
				data-icon="grid"
				data-theme="c"
				data-iconpos="notext"
				style="background:green"></a> 
		</div>
	
		<div role="main" class="ui-content" id="search-maps-result-content">
			<div id="buscar-mapas-result-search"></div>
			<ul id="maps-results" name="maps-results" data-role='listview'
				data-inset='true'>
			</ul>
		</div>
	</div>
	
	
	
	
	
	<!-- 
	**********************************************
	listado de mapas cerca
	**********************************************
	-->
	<div data-role="page" id="maps-around-results">
		<div data-role="header" data-position="fixed">
			<a data-icon="arrow-l" data-iconpos="notext" id="back-button"
				data-theme="c" data-rel="back" class="large_button"></a>
			<h2 id="maps-around-result" style="white-space: normal;" data-i18n>app.maps-around-result</h2>
			<a href="#filters" 
				id="filter_button_xy"
				data-role="button" 
				data-icon="grid"
				data-theme="c"
				data-iconpos="notext"
				style="background:green"
				data-i18n></a>
			
			 <div style="text-align:center">
				<span id='toponym'></span>
			</div>
		</div>
		<div role="main" class="ui-content" id="search-maps-result-content">
			<div id="maps-around-result-search"></div>
			<ul id="maps-around-results-listview"
				name="maps-around-results-listview" data-role='listview'
				data-inset='true'>
			</ul>
		</div>
	</div>
	
	
	
	<!-- 
	**********************************************
	pantalla de favoritos
	**********************************************
	-->
	<div data-role="page" id="fav-results">
		<div data-role="header" data-position="fixed">
			<a data-icon="arrow-l" data-iconpos="notext" id="back-button"
				data-theme="c" data-rel="back" class="large_button"></a>
			<h2 id="favs-header" style="white-space: normal;" data-i18n>app.favs</h2>
			<a href="#menu_panel" data-icon="bars" data-iconpos="notext"
				id="menu-button" data-theme="c" class="ui-btn-right large_button"></a>
		</div>
		<div role="main" class="ui-content" id="favs-result-content">
			<!-- <h2 id="maps-around-result-search"></h2>-->
			<ul id="favs-listview" name="favs-listview" data-role='listview'
				data-inset='true'>
			</ul>
		</div>
	</div>
	
	
</body>
</html>